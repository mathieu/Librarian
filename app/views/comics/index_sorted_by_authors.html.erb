<% content_for :title, 'All comics' %>
<% content_for :navbar_link, 'comics'%>



<div class="page-title">
  <h1>
    <% if can? :create, Comic %>
        <div class="pull-right">
          <%= link_to 'New comic', new_comic_path, :class => 'btn btn-success'%>
        </div>
    <% end %>
    Comics
    <%= link_to '', comics_path(:display => 'list', :sort_by => params[:sort_by]), :class => 'btn glyphicon glyphicon-list' %>
    <%= link_to '', comics_path(:display => 'grid', :sort_by => params[:sort_by]), :class => 'btn glyphicon glyphicon-th' %>
  </h1>

</div>

<%= render partial: 'index_nav', locals: {active_link: 'authors'} %>

<% @authors.each do |author| %>
    <% if author.comics.count > 0 %>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h5><%= author.name %></h5>
          </div>
          <div class="panel-body">
            <%= render partial: "comics/#{params[:display]?params[:display]:'grid'}", locals: {comics: author.comics.paginate(:page => params[:page]), paginate:true} %>
          </div>
        </div>
    <% end %>
<% end %>



